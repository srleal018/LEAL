<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leal Scripts | Business Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #f8f9fa;
            --text: #1e293b;
            --card-bg: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); line-height: 1.6; }

        /* HEADER CLEAN */
        header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 10%;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #e5e7eb;
            position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-size: 1.25rem; font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .nav-link { text-decoration: none; color: var(--text); font-weight: 500; font-size: 0.9rem; margin-left: 1.5rem; transition: 0.2s; }
        .nav-link:hover { color: var(--primary); }
        .btn-adm { background: #f1f5f9; color: var(--text); border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600; }

        .container { max-width: 1100px; margin: 0 auto; padding: 3rem 1rem; }

        /* ADMIN DASHBOARD */
        #adminPanel {
            display: none; background: #fff; border: 1px solid #e5e7eb; padding: 2rem; border-radius: 12px; margin-bottom: 3rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }
        .adm-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
        .adm-list { background: #f8f9fa; padding: 1rem; border-radius: 8px; max-height: 300px; overflow-y: auto; border: 1px solid #eee; }
        .adm-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; font-size: 0.85rem; }

        /* TITLES */
        h2 { font-size: 1.5rem; font-weight: 700; margin-bottom: 2rem; display: flex; align-items: center; gap: 10px; }
        h2 i { color: var(--primary); }

        /* GRID DE PRODUTOS */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 4rem; }
        .card { 
            background: var(--card-bg); border: 1px solid #e5e7eb; padding: 2rem; border-radius: 12px;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.05); border-color: var(--primary); }
        .card h3 { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .card p { color: #64748b; font-size: 0.9rem; margin-bottom: 1.5rem; }

        /* BOTÕES */
        .btn { 
            display: inline-block; width: 100%; text-align: center; padding: 10px; border-radius: 6px;
            text-decoration: none; font-weight: 600; font-size: 0.85rem; transition: 0.2s; border: none; cursor: pointer;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-outline { background: transparent; border: 1px solid #e2e8f0; color: var(--text); }
        .btn-danger { background: #fee2e2; color: var(--danger); }

        /* FORMULÁRIOS */
        input, textarea, select { width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 1rem; outline: none; background: #fff; }
        input:focus { border-color: var(--primary); ring: 2px solid var(--primary); }

        /* FEEDBACKS */
        .review-box { background: #fff; padding: 1.5rem; border-radius: 8px; border: 1px solid #e5e7eb; margin-bottom: 1rem; }
        .reply-leal { margin-top: 1rem; padding: 10px; background: #f0f9ff; border-radius: 6px; border-left: 3px solid var(--primary); font-size: 0.85rem; }

        /* PIX POPUP */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .popup { background: white; padding: 2rem; border-radius: 16px; width: 400px; text-align: center; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); }

        footer { padding: 4rem 1rem; text-align: center; background: #fff; border-top: 1px solid #e5e7eb; color: #94a3b8; font-size: 0.85rem; }
    </style>
</head>
<body>

    <div id="pixPopup" class="overlay">
        <div class="popup">
            <h3 style="margin-bottom: 10px;">Pagamento Seguro</h3>
            <p style="color: #64748b;">Valor: <strong id="pixPrice" style="color: var(--text);"></strong></p>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1.5rem 0; font-size: 0.75rem; border: 1px dashed #cbd5e1; word-break: break-all;" id="pixKey"></div>
            <button class="btn btn-primary" onclick="closePix()">OK, CONCLUÍDO</button>
        </div>
    </div>

    <header>
        <div class="logo"><i class="fas fa-shield-alt"></i> LEAL SCRIPTS</div>
        <div class="nav">
            <a href="#loja" class="nav-link">Loja</a>
            <a href="#feed" class="nav-link">Avaliações</a>
            <button class="btn-adm" style="margin-left: 20px;" onclick="openAdmin()">Painel ADM</button>
        </div>
    </header>

    <div class="container">

        <div id="adminPanel">
            <h2 style="color: var(--text); border: none;">Dashboard Administrativo</h2>
            <div class="adm-grid">
                <div>
                    <h4>Novo Projeto</h4>
                    <input type="text" id="aT" placeholder="Título">
                    <textarea id="aD" placeholder="Descrição"></textarea>
                    <select id="aType"><option value="free">Lançamento Free</option><option value="vip">Loja Premium</option></select>
                    <input type="text" id="aP" placeholder="Preço (Ex: 49.90)">
                    <input type="text" id="aK" placeholder="Chave PIX">
                    <input type="file" id="aF">
                    <button class="btn btn-primary" id="btnPost" onclick="uploadData()">Publicar no Site</button>
                </div>
                <div>
                    <h4>Gestão de Conteúdo</h4>
                    <div class="adm-list" id="admItems"></div>
                    <h4 style="margin-top: 20px;">Moderação de Comentários</h4>
                    <div class="adm-list" id="admRevs"></div>
                </div>
            </div>
        </div>

        <section>
            <h2><i class="fas fa-rocket"></i> Lançamentos</h2>
            <div id="gridFree" class="grid"></div>
        </section>

        <section id="loja">
            <h2><i class="fas fa-shopping-bag"></i> Loja VIP</h2>
            <div id="gridVip" class="grid"></div>
        </section>

        <section id="feed" style="background: #fff; padding: 2rem; border-radius: 12px; border: 1px solid #e5e7eb;">
            <h2><i class="fas fa-comments"></i> Avaliações</h2>
            <div style="max-width: 600px; margin-bottom: 3rem;">
                <input type="text" id="revNick" placeholder="Seu nome">
                <textarea id="revMsg" placeholder="Sua mensagem..."></textarea>
                <button class="btn btn-primary" style="width: auto; padding: 10px 30px;" onclick="postReview()">Enviar Feedback</button>
            </div>
            <div id="publicReviews"></div>
        </section>

    </div>

    <footer>
        <p>© 2026 LEAL SCRIPTS - Todos os direitos reservados</p>
        <div style="margin-top: 1rem;">
            <a href="#" style="color: #5865f2; text-decoration: none; font-weight: 600;"><i class="fab fa-discord"></i> Comunidade Oficial</a>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCOk0bV5VwLBiaZ_vL5a8kpYzOCmqTad0I",
            authDomain: "leal-1a27b.firebaseapp.com",
            projectId: "leal-1a27b",
            storageBucket: "leal-1a27b.firebasestorage.app",
            messagingSenderId: "935085322117",
            appId: "1:935085322117:web:e8454ce939b8035b809eec"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // UPLOAD DATA
        window.uploadData = async () => {
            const btn = document.getElementById('btnPost');
            const file = document.getElementById('aF').files[0];
            if(!file) return alert("Selecione o arquivo!");
            
            btn.innerText = "Enviando..."; btn.disabled = true;
            const sRef = ref(storage, `files/${Date.now()}_${file.name}`);
            await uploadBytes(sRef, file);
            const url = await getDownloadURL(sRef);

            await addDoc(collection(db, "produtos"), {
                t: document.getElementById('aT').value,
                d: document.getElementById('aD').value,
                tp: document.getElementById('aType').value,
                p: document.getElementById('aP').value || "0",
                k: document.getElementById('aK').value || "",
                link: url,
                data: new Date()
            });
            location.reload();
        };

        // GESTÃO
        window.delItem = async (id) => { if(confirm("Excluir projeto?")) { await deleteDoc(doc(db, "produtos", id)); window.refresh(); } };
        window.delRev = async (id) => { if(confirm("Remover comentário?")) { await deleteDoc(doc(db, "avaliacoes", id)); window.refresh(); } };
        window.repRev = async (id) => {
            const txt = prompt("Sua resposta:");
            if(txt) { await updateDoc(doc(db, "avaliacoes", id), { reply: txt }); window.refresh(); }
        };

        // RENDER
        window.refresh = async () => {
            const snapP = await getDocs(query(collection(db, "produtos"), orderBy("data", "desc")));
            const snapA = await getDocs(query(collection(db, "avaliacoes"), orderBy("data", "desc")));
            
            const gF = document.getElementById('gridFree'); const gV = document.getElementById('gridVip');
            const aI = document.getElementById('admItems'); const aR = document.getElementById('admRevs');
            const pR = document.getElementById('publicReviews');

            gF.innerHTML = ""; gV.innerHTML = ""; aI.innerHTML = ""; aR.innerHTML = ""; pR.innerHTML = "";

            snapP.forEach(doc => {
                const i = doc.data();
                const card = `
                    <div class="card">
                        <h3>${i.t}</h3>
                        <p>${i.d}</p>
                        ${i.tp === 'vip' ? 
                            `<button class="btn btn-primary" onclick="openPix('${i.p}', '${i.k}')">Comprar por R$ ${i.p}</button>` : 
                            `<a href="${i.link}" class="btn btn-outline" target="_blank">Download Grátis</a>`}
                    </div>`;
                if(i.tp === 'free') gF.innerHTML += card; else gV.innerHTML += card;
                aI.innerHTML += `<div class="adm-item">${i.t} <button onclick="delItem('${doc.id}')" class="btn btn-danger btn-sm" style="width:auto">X</button></div>`;
            });

            snapA.forEach(doc => {
                const r = doc.data();
                pR.innerHTML += `
                    <div class="review-box">
                        <strong>${r.nick}</strong>
                        <p style="margin-top:5px; color:#475569;">${r.msg}</p>
                        ${r.reply ? `<div class="reply-leal"><strong>Oficial Leal:</strong> ${r.reply}</div>` : ''}
                    </div>`;
                aR.innerHTML += `
                    <div class="adm-item">
                        <span>${r.nick}: ${r.msg.substring(0,15)}...</span>
                        <div>
                            <button onclick="repRev('${doc.id}')" class="btn btn-primary btn-sm" style="width:auto">Responder</button>
                            <button onclick="delRev('${doc.id}')" class="btn btn-danger btn-sm" style="width:auto">X</button>
                        </div>
                    </div>`;
            });
        };

        window.postReview = async () => {
            const n = document.getElementById('revNick').value; const m = document.getElementById('revMsg').value;
            if(!n || !m) return;
            await addDoc(collection(db, "avaliacoes"), { nick: n, msg: m, data: new Date(), reply: "" });
            document.getElementById('revMsg').value = ""; window.refresh();
        };

        window.refresh();
    </script>

    <script>
        function openAdmin() { if(prompt("Senha:") === "l34l") document.getElementById('adminPanel').style.display = 'block'; }
        function openPix(p, k) { 
            document.getElementById('pixPrice').innerText = "R$ " + p;
            document.getElementById('pixKey').innerText = k;
            document.getElementById('pixPopup').style.display = 'flex'; 
        }
        function closePix() { document.getElementById('pixPopup').style.display = 'none'; }
    </script>
</body>
</html>
